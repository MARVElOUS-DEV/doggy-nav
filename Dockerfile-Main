FROM node:14-alpine as build
LABEL name="marvelous"

COPY ./packages/doggy-nav-main/package.json /tmp/package.json
COPY yarn.lock /tmp/yarn.lock
RUN cd /tmp && yarn
RUN mkdir -p /app && cp -a /tmp/node_modules /app/

WORKDIR /app
ADD ./packages/doggy-nav-main/. ./

RUN yarn build

EXPOSE 3000
ENV HOST=0.0.0.0

CMD [ "/usr/local/bin/yarn", "start" ]